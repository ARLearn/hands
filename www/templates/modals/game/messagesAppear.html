<div class="modal-header">
    <h3 class="modal-title">Define when this message must appear</h3>
</div>
<div class="modal-body">
    <uib-tabset active="activeJustified" justified="true">
        <uib-tab index="0" heading="Simple Dependency">

            This message will appear when a user <br>

            <ui-select  ng-model="dependsOn.action" placeholder="action"
                        theme="bootstrap" ng-disabled="disabled"  title="Choose an action">
                <!--<ui-select-match placeholder="Select friend...">{{$item.action}} &lt;{{$item.name}}&gt;</ui-select-match>-->
                <ui-select-match placeholder="select an action" >{{$select.selected.name}}</ui-select-match>

                <ui-select-choices repeat="action in actions | filter:$select.search" value="selection.action">
                    <!--<div ng-if="action.isTag" ng-bind-html="friend.name +' <small>(new)</small>'| highlight: $select.search"></div>-->
                    <div ng-bind-html="action.name | highlight: $select.search"></div>

                </ui-select-choices>
            </ui-select>

            the following message <br>


            <ui-select  ng-model="selection.message" on-select="updateActions($item, $modal)"
                        theme="bootstrap" ng-disabled="disabled"  title="Choose an action">
                <ui-select-match placeholder="select a message">{{$select.selected.name}}</ui-select-match>
                <ui-select-choices repeat="message in messages ">
                    <!--<div ng-if="friend.isTag" ng-bind-html="friend.name +' <small>(new)</small>'| highlight: $select.search"></div>-->
                    <!--<div ng-if="!friend.isTag" ng-bind-html="friend.name + friend.isTag| highlight: $select.search"></div>-->
                    <small>

                        {{message.name}}
                        </span>
                    </small>
                </ui-select-choices>
            </ui-select>


        </uib-tab>
        <uib-tab index="1" heading="QR code">
            <p>Select QR scanner </p>
            <ui-select  ng-model="selection.message"
                        theme="bootstrap" ng-disabled="disabled"  title="Choose an action">
                <!--<ui-select-match placeholder="Select friend...">{{$item.type}} &lt;{{$item.name}}&gt;</ui-select-match>-->
                <ui-select-match>{{$select.selected.name}}</ui-select-match>
                <ui-select-choices repeat="message in qrmessages ">
                    <!--<div ng-if="friend.isTag" ng-bind-html="friend.name +' <small>(new)</small>'| highlight: $select.search"></div>-->
                    <!--<div ng-if="!friend.isTag" ng-bind-html="friend.name + friend.isTag| highlight: $select.search"></div>-->
                    <small>

                        {{message.name}}
                        </span>
                    </small>
                </ui-select-choices>
            </ui-select>

            <p>This message will become available if the following QR code is scanned with the selected scanner ('{{selection.message.name}}')</p>


            <p style="text-align:center;"><img ng-src="http://qrfree.kaywa.com/?l=1&s=8&d={{dependsOn.action}}"/></p>
            <div class="form-group">
                <label for="qrlabel" class="col-sm-2 control-label">QR label:</label>

                <div class="col-sm-10">
                    <input type="text" ng-model="dependsOn.action" class="form-control" id="qrlabel" placeholder="type in qr code lable">
                </div>
            </div>
            <br>

        </uib-tab>
    </uib-tabset>




</div>
<div class="modal-footer">
    <button class="btn btn-primary" ng-disabled="!dependsOn.action || !selection.message" ng-click="ok()">Create</button>
    <button class="btn btn-default" ng-click="cancel()">Close</button>
</div>